doctype
html
    head
        title #{title}
        link(type='text/css', rel='stylesheet', href='/MacaronicParseUI/css/coe.css')
        link(type='text/css', rel='stylesheet', href='/shell/css/style.css')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery-1.11.3.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/socket.io.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/messages.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery-ui.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/collection-o-edits.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jsonstrings-coe.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/underscore-min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/knockout-3.3.0.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.straightline.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.curvedarrow.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/treemethods.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/coe-utils.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/d3.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.d3.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/bleu.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/word-options.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/regex_tokenizer.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/PorterStemmer1980.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/discrete.js')
        script.
            $(document).ready(function () {
                var socket = io();
                setup("#{user.username}", socket, parseInt("#{ui_version}"), true ,"#{sentence_prefered}")

                if ("#{user.assignmentId}" === ""){
                    assignmentId = "ASSIGNMENT_ID_NOT_AVAILABLE"
                }else{
                    assignmentId = "#{user.assignmentId}"
                }
                if ("#{hitId}" === ""){
                    hitId = "HIT_ID_NOT_AVAILABLE"
                }else{
                    hitId = "#{hitId}"
                }

            });
            function post_it(parameters) {
                console.log("called post...", parameters)
                var form = $('<form></form>');
                form.attr("method", "post");
                form.attr("action", "https://workersandbox.mturk.com/mturk/externalSubmit");
                $.each(parameters, function(key, value) {
                    var field = $('<input></input>');
                    field.attr("type", "hidden");
                    field.attr("name", key);
                    field.attr("value", value);
                    form.append(field);
                    console.log("name", key , "val", value);
                });
                $(document.body).append(form);
                completedTask()
                form.submit();
            }

    body.bodygrad
        #page
            h3 Instructions:
            h4 Please read carefully.
            ul
                li Guess the correct translation of each foreign word in a sentence and get points for a translation.
                li After making intial guesses click
                    b  'Submit Guess'
                li Correct guesses will be shaded green and will earn points. (value of each guess is shown below each text box)
                li There are no limits on number of guesses!
                li If you are not able to make a guess, click
                    b  'Get Random Clue'
                li This will change a part of the foreign sentence into English, either:
                    ul
                        li One (or more) of the foreign will be shown in English (in blue text)
                        li Or some words in the foreign sentence will be reordered (light blue shading)
                li
                    b Note:
                    | Each time to get a random clue the value of each guess will reduce!
                li Now you can re-evaluate your guesses and try again.
                li Repeat this process untill you have guess all words correctly or till the entire sentence is revealed.

            h4 Example:
                br
                | An example HIT is shown below.
                #mainbody(style='margin-bottom:20;margin-top:20;margin-left:20;margin-right:20;')
                button#confirmInput(type='button',  onclick="post_it({ 'foo': 'bar', 'assignmentId': '#{user.assignmentId}'})") Accept HIT to Proceed
                br

            h4 Reward & Bonus
            ul
                li  Reward for each HIT is $0.20
                li  Bonus of $1 is awarded for completing 25 HITs
                li  Bonus of $2 is awarded for completing 50 HITs
                li  If you complete more than 25 HITs you
                    b  qualify
                    |  for a
                    b  $10 Bonus.
                li  The $10 bonus will be awarded to the individual who accumulates the most points.
                li
                    b Helpful tips:
                    ul
                     li Fewer clues will ensure that you get more points for every correct guess.
                     li Make a few initial guesses to get maximum points, at least for the easy words.
                     li Harder words will earn more points, so do not give up on them!!
                     li try and remember foreign words! They are likely to appear again.
                     li You can hover over a clue (blue english word) to see its corresponding foreign.


            h4 Review & Rules:
            ul
                li All submissions will be accepted within 5 days.
                li Please type in full english words or very short phrases (2 words).
                li
                    b Please do not type nonsense words!!
                li Do not look up words in a dictionary or another web site.





