doctype
html
    head
        title #{title}
        link(type='text/css', rel='stylesheet', href='/MacaronicParseUI/css/coe.css')
        link(type='text/css', rel='stylesheet', href='/shell/css/style.css')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery-1.11.3.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/socket.io.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/messages.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery-ui.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/collection-o-edits.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jsonstrings-coe.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/underscore-min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/knockout-3.3.0.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.straightline.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.curvedarrow.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/treemethods.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/coe-utils.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/d3.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.d3.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/bleu.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/word-options.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/regex_tokenizer.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/PorterStemmer1980.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/discrete.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/glove.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/similarity.js')
        script.
            $(document).ready(function () {
                var socket = io();
                setup("#{user.username}", socket, parseInt("#{ui_version}"), true, "#{sentence_prefered}")

                if ("#{user.assignmentId}" === "") {
                    assignmentId = "ASSIGNMENT_ID_NOT_AVAILABLE"
                } else {
                    assignmentId = "#{user.assignmentId}"
                }
                if ("#{hitId}" === "") {
                    hitId = "HIT_ID_NOT_AVAILABLE"
                } else {
                    hitId = "#{hitId}"
                }

            });
            function post_it(parameters) {
                console.log("called post...", parameters)
                var form = $('<form></form>');
                form.attr("method", "post");
                form.attr("action", "https://workersandbox.mturk.com/mturk/externalSubmit");
                $.each(parameters, function (key, value) {
                    var field = $('<input></input>');
                    field.attr("type", "hidden");
                    field.attr("name", key);
                    field.attr("value", value);
                    form.append(field);
                    console.log("name", key, "val", value);
                });
                $(document.body).append(form);
                completedTask()
                form.submit();
            }

    body.bodygrad
        #page
            h3 Instructions:
            h4 Please read carefully.
            ul
                li Guess the correct translation of each foreign word in a sentence and get points for a translation.
                li After making intial guesses click
                    b  'Submit Guess'
                li Earn points for each guess:
                    ul
                        li Correct guesses = 10 points.
                        li Close guesses = 1-6 points, depending on how close they are to the answer.
                        li Incorrect guesses = 0 points
                        li Blank, Nonsense, Repeated guesses = -1 points
                li Each time you submit a guess, some new parts of the sentence will be reveled to you.
                li This will change a part of the foreign sentence into English, either:
                    ul
                        li One (or more) of the foreign will be shown in English (in blue text)
                        li Or some words in the foreign sentence will be reordered (light blue shading)
                li
                li Now you can re-evaluate your guesses and try again.
                li Repeat this process until you have guess all words correctly or till the entire sentence is revealed.

            h4 Example:
                br
                | An example HIT is shown below.
                #mainbody(style='margin-bottom:20;margin-top:20;margin-left:20;margin-right:20;')
                button#confirmInput(type='button',  onclick="post_it({ 'foo': 'bar', 'assignmentId': '#{user.assignmentId}'})") Accept HIT to Proceed
                br

            h4 Reward & Bonus
            ul
                li  Reward for each HIT is $0.12
                li  Bonus of $2 is awarded for earning 600 points
                li  Bonus of $6 is awarded for earning 1200 points
                li  If you earn more than 600 points
                    b  qualify
                    |  for a
                    b  $10 Bonus.
                li  The $10 bonus will be awarded to the individual who accumulates the most points per sentence attempted.
                li
                    b Helpful tips:
                    ul
                        li Repeating the same word over and over will lose points!
                        li Its better to guess than leave blanks
                        li Always try and make a attempt, even if you are wrong you will get points for effort.
                        li Incorrect guesses that are "close" to the right answer will be worth 1-6 points!
                        li try and remember foreign words! They are likely to appear again.
                        li You can hover over a clue (blue english word) to see its corresponding foreign.


            h4 Review & Rules:
            ul
                li All submissions will be accepted within 5 days.
                li Please type in full english words or very short phrases (2 words).
                li
                    b Please do not type nonsense words!!
                li Do not look up words in a dictionary or another web site. (you will be rejected)
            h4 More Examples:
            ul
                li Don't type nonsense words, or repeated words
                    b  (you will lose points!!)
                img(src='images/wrong2.png', width='50%', height='50%')
                img(src='images/wrong.png',width='50%', height='50%')
                li Make guesses,
                    b  even if they are not good
                    | (you will get points for effort)
                img(src='images/acceptable.png',width='50%', height='50%')




