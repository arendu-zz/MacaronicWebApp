doctype
html
    head
        title #{title}
        link(type='text/css', rel='stylesheet', href='/MacaronicParseUI/css/coe.css')
        link(type='text/css', rel='stylesheet', href='/shell/css/style.css')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery-1.11.3.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/socket.io.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/messages.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery-ui.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/collection-o-edits.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jsonstrings-coe.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/underscore-min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/knockout-3.3.0.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.straightline.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.curvedarrow.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/treemethods.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/coe-utils.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/d3.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/jquery.d3.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/regex_tokenizer.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/PorterStemmer1980.min.js')
        script(type='text/javascript', src='/MacaronicParseUI/js/bleu.js')
        script.
            $(document).ready(function () {
                var socket = io();
                setup("GUEST", socket, parseInt("#{ui_version}"), true)
                if ("#{user.assignmentId}" == "ASSIGNMENT_ID_NOT_AVAILABLE"){
                    console.log('assignmet disabled' + '#{user.assignmentId}')
                    $('#confirmInput').prop('disabled', true)
                    $('#confirmInput').html('Accept HIT to view tasks')
                }else{
                    console.log('assignent enabled!!'+ '#{user.assignmentId}')
                    $('#confirmInput').prop('disabled', false)
                    $('#confirmInput').html('submit')
                }
            });
            function post_it(parameters) {
                console.log("called post...", parameters)
                var form = $('<form></form>');
                form.attr("method", "post");
                form.attr("action", "https://workersandbox.mturk.com/mturk/externalSubmit");
                $.each(parameters, function(key, value) {
                    var field = $('<input></input>');
                    field.attr("type", "hidden");
                    field.attr("name", key);
                    field.attr("value", value);
                    form.append(field);
                    console.log("name", key , "val", value);
                });
                $(document.body).append(form);
                completedTask()
                form.submit();
            }

    body.bodygrad
        #page.pageContainer
            h2
                |Instructions
            p
                | The sentence below is an example.
            p
                |The goal is to guess the translation of a foreign sentence.
            p
                |Clicking on words in the foreign sentence reveals clues, but at the cost of points(grey).
                b You have a limited number of clues per sentence!
            p
                | Once you feel you have understood the meaning of the sentence click 'Attemp Translation'.
                b You will not get more clues once you click it!
            p
                | Enter your translation guess in the text box below the foregin sentence. A good guess earns points(green).
            p
                | Collect as many points as possible to receive a bonus reward.

            #mainbody(style='margin-bottom:20;margin-top:20;margin-left:20;margin-right:20;')
            button#confirmInput(type='button',  onclick="post_it({ 'foo': 'bar', 'assignmentId': '#{user.assignmentId}'})")
